<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>中国青少年美式足球装备球队地图</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
body { margin:0; font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto; }
#map { height:100vh; }
.team-label {
  background: rgba(255,255,255,0.9);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
}
</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
function svgLogo(text, color){
  return 'data:image/svg+xml;utf8,' + encodeURIComponent(`
  <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48">
    <rect width="48" height="48" rx="8" fill="${color}"/>
    <text x="24" y="30" font-size="16" text-anchor="middle" fill="#fff">${text}</text>
  </svg>`);
}

function scatter(lat, lng, n, r=0.025){
  if(n===1) return [[lat,lng]];
  return Array.from({length:n},(_,i)=>{
    const a=i/n*Math.PI*2;
    return [lat+r*Math.sin(a), lng+r*Math.cos(a)];
  });
}

const map=L.map('map').setView([35,104],4);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18}).addTo(map);

const cities=[
{
  city:"佛山",
  center:[23.0215,113.1214],
  teams:[
    {name:"佛山小兕虎",age:"U9 / U11 / U13 / U15",logo:"real"}
  ]
},
{
  city:"深圳",
  center:[22.5431,114.0579],
  teams:[
    {name:"深圳鲲鹏",age:"U13"},
    {name:"深圳热浪",age:"U13"},
    {name:"深圳火箭熊",age:"U10"}
  ]
},
{
  city:"广州",
  center:[23.1291,113.2644],
  teams:[
    {name:"广州骑士",age:"U11 / U13"},
    {name:"广州白鳍豚",age:"U11 / U13"},
    {name:"广州八爪鱼",age:"U10"}
  ]
}
];

cities.forEach(c=>{
  const pts=scatter(c.center[0],c.center[1],c.teams.length);
  c.teams.forEach((t,i)=>{
    const iconUrl=t.logo==="real"
      ? "logos/fsx.png"
      : svgLogo("AF","#34495e");

    const m=L.marker(pts[i],{
      icon:L.icon({
        iconUrl,
        iconSize:[48,48],
        iconAnchor:[24,24],
        popupAnchor:[0,-24]
      })
    }).addTo(map);

    m.bindTooltip(`${c.city} · ${t.name}`,{
      permanent:true,direction:"top",offset:[0,-28],
      className:"team-label"
    });

    m.bindPopup(`<b>${t.name}</b><br>城市：${c.city}<br>年龄组：${t.age}<br>American Football`);
  });
});
</script>
</body>
</html>
