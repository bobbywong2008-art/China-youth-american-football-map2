<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>中国青少年美式足球装备球队地图（示意）</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
}

#map {
  height: 100%;
}

.title {
  position: absolute;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,0.95);
  padding: 8px 18px;
  font-size: 15px;
  font-weight: 600;
  border-radius: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.15);
  z-index: 999;
}

.team-icon {
  background: white;
  border-radius: 8px;
  box-shadow: 0 1px 6px rgba(0,0,0,0.3);
}

.team-label {
  font-size: 11px;
  font-weight: 500;
  color: #222;
  background: transparent;
  border: none;
  box-shadow: none;
}
</style>
</head>

<body>

<div class="title">中国青少年美式足球装备球队地图（示意）</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map('map').setView([23.2, 113.3], 6);

// 高级浅色底图
L.tileLayer(
  'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
  { maxZoom: 18 }
).addTo(map);

// 广东球队数据（示意）
const cities = [
  {
    city: "广州",
    center: [23.1291, 113.2644],
    teams: [
      "广州骑士 U11/U13",
      "广州白鳍豚 U11/U13",
      "广州八爪鱼 U10"
    ]
  },
  {
    city: "深圳",
    center: [22.5431, 114.0579],
    teams: [
      "深圳鲲鹏 U13",
      "深圳热浪 U13",
      "深圳火箭熊 U10"
    ]
  },
  {
    city: "佛山",
    center: [23.0215, 113.1214],
    teams: [
      "佛山小兕虎 U9/U11/U13/U15"
    ]
  },
  {
    city: "珠海",
    center: [22.2707, 113.5767],
    teams: [
      "珠海海东青"
    ]
  }
];

let teamMarkers = [];

cities.forEach(c => {

  // 城市锚点
  L.circleMarker(c.center,{
    radius:4,
    color:"#666",
    fill:true,
    fillOpacity:0.7
  }).addTo(map);

  const count = c.teams.length;
  const angleStep = Math.PI * 2 / count;
  const radius = 0.15;

  c.teams.forEach((name, i) => {
    const angle = i * angleStep;
    const lat = c.center[0] + Math.sin(angle) * radius;
    const lng = c.center[1] + Math.cos(angle) * radius;

    // 连接线
    L.polyline([c.center, [lat, lng]], {
      color:"#aaa",
      weight:1,
      opacity:0.7
    }).addTo(map);

    const icon = L.icon({
      iconUrl: "https://upload.wikimedia.org/wikipedia/commons/6/6e/American_football_icon.svg",
      iconSize: [48, 48],
      className: "team-icon"
    });

    const marker = L.marker([lat, lng], {icon}).addTo(map);

    marker.bindTooltip(
      `${c.city} · ${name}`,
      {permanent:true, direction:"top", offset:[0,-30], className:"team-label"}
    );

    teamMarkers.push(marker);
  });
});

// 缩放控制文字显隐
function updateLabels(){
  const z = map.getZoom();
  teamMarkers.forEach(m=>{
    if(z < 6){
      m.closeTooltip();
    }else{
      m.openTooltip();
    }
  });
}

map.on('zoomend', updateLabels);
updateLabels();
</script>

</body>
</html>
