<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>广东青少年美式足球球队分布图｜VISUAL PRO</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html,body,#map{
  height:100%;
  margin:0;
  background:#0f1624;
}

.leaflet-container{
  background:#0f1624;
}

/* ===== Logo 卡片 ===== */
.team-icon{
  width:56px;
  height:56px;
  background:#fff;
  border-radius:50%;
  box-shadow:0 6px 16px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
}
.team-icon img{
  width:44px;
  height:44px;
  object-fit:contain;
}

/* ===== 弹窗 ===== */
.popup-card{
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue";
}
.popup-card h3{
  margin:0 0 6px 0;
  font-size:16px;
}
.popup-card p{
  margin:0;
  font-size:13px;
  color:#555;
}
</style>
</head>

<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== 地图 =====
const map = L.map('map',{zoomControl:true})
  .setView([23.1,113.3],7);

// 深色底图（体育感）
L.tileLayer(
  'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
  {maxZoom:18}
).addTo(map);

// ===== Logo 对照 =====
const teamLogos = {
  "广州骑士":"logos/guangzhou-knights.png",
  "广州白鳍豚":"logos/guangzhou-dolphins.png",
  "佛山小兕虎":"logos/foshan-xiaoxihu.png"
};

// ===== 数据 =====
const cities = [
  {
    city:"广州",
    center:[23.1291,113.2644],
    teams:[
      {name:"广州骑士", age:"U11 / U13"},
      {name:"广州白鳍豚", age:"U11 / U13"},
      {name:"广州八爪鱼", age:"U10"}
    ]
  },
  {
    city:"深圳",
    center:[22.5431,114.0579],
    teams:[
      {name:"深圳鲲鹏", age:"U13"},
      {name:"深圳热浪", age:"U13"},
      {name:"深圳火箭熊", age:"U10"}
    ]
  },
  {
    city:"佛山",
    center:[23.0215,113.1214],
    teams:[
      {name:"佛山小兕虎", age:"U9 / U11 / U13 / U15"}
    ]
  },
  {
    city:"珠海",
    center:[22.2707,113.5767],
    teams:[
      {name:"珠海海东青", age:"待确认"}
    ]
  }
];

// ===== 放射展开 + 引导线 =====
function spread(latlng,count,index){
  if(count===1) return latlng;
  const r = 0.06;
  const a = index/count*Math.PI*2;
  return [
    latlng[0]+r*Math.cos(a),
    latlng[1]+r*Math.sin(a)
  ];
}

// ===== 渲染 =====
cities.forEach(city=>{
  city.teams.forEach((team,i)=>{
    const pos = spread(city.center,city.teams.length,i);

    // 引导线
    if(city.teams.length>1){
      L.polyline([city.center,pos],{
        color:"#4c6ef5",
        weight:1,
        opacity:.6
      }).addTo(map);
    }

    // Logo 卡片
    const icon = L.divIcon({
      className:"",
      html:`
        <div class="team-icon">
          <img src="${teamLogos[team.name]||'logos/placeholder.png'}">
        </div>
      `,
      iconSize:[56,56],
      iconAnchor:[28,28]
    });

    L.marker(pos,{icon})
      .addTo(map)
      .bindPopup(`
        <div class="popup-card">
          <h3>${team.name}</h3>
          <p>美式足球（装备）</p>
          <p>梯队：${team.age}</p>
        </div>
      `);
  });
});
</script>
</body>
</html>

